(()=>{var e={};e.id=459,e.ids=[459],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},47502:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>y,routeModule:()=>g,serverHooks:()=>h,workAsyncStorage:()=>f,workUnitAsyncStorage:()=>x});var s={};r.r(s),r.d(s,{DELETE:()=>d,GET:()=>u,POST:()=>m,PUT:()=>c});var a=r(48106),n=r(48819),o=r(12050),p=r(4235);class i{constructor(){this.templates=new Map,this.initializeDefaultTemplates()}initializeDefaultTemplates(){let e={id:"default-financial",name:"Financial Analysis",template:"Analyze the following financial data: {{data}}",category:"financial_analysis",createdAt:new Date,updatedAt:new Date,metadata:{author:"System",tags:["financial","analysis"],estimatedTokens:100,complexity:"medium",purpose:"Financial data analysis"}};this.templates.set(e.id,e)}getTemplate(e){return this.templates.get(e)||null}getTemplates(){return Array.from(this.templates.values())}getTemplatesByCategory(e){return this.getTemplates().filter(t=>t.category===e)}searchTemplates(e){let t=e.toLowerCase();return this.getTemplates().filter(e=>e.name.toLowerCase().includes(t)||e.template.toLowerCase().includes(t)||e.metadata.tags.some(e=>e.toLowerCase().includes(t)))}registerTemplate(e){this.templates.set(e.id,e)}generatePrompt(e,t){let r=this.getTemplate(e);if(!r)return{success:!1,errors:["Template not found"]};try{let e=r.template;return Object.entries(t).forEach(([t,r])=>{let s=`{{${t}}}`;e=e.replace(RegExp(s,"g"),String(r))}),{success:!0,prompt:e,variables:t,metadata:r.metadata}}catch(e){return{success:!1,errors:[`Failed to generate prompt: ${e}`]}}}previewPrompt(e,t){let r=this.generatePrompt(e,t);if(r.prompt)return r.prompt;let s=this.getTemplate(e);return s?.template||""}}let l=new i;async function u(e){try{let{searchParams:t}=new URL(e.url),r=t.get("category"),s=t.get("search"),a=t.get("id");if(a){let e=l.getTemplate(a);if(!e)return p.NextResponse.json({error:"Template not found"},{status:404});return p.NextResponse.json({template:e})}if(s){let e=l.searchTemplates(s);return p.NextResponse.json({templates:e,count:e.length,query:s})}if(r){let e=l.getTemplatesByCategory(r);return p.NextResponse.json({templates:e,count:e.length,category:r})}let n=l.getTemplates();return p.NextResponse.json({templates:n,count:n.length,categories:{financial_analysis:n.filter(e=>"financial_analysis"===e.category).length,tutorial:n.filter(e=>"tutorial"===e.category).length,interview:n.filter(e=>"interview"===e.category).length,custom:n.filter(e=>"custom"===e.category).length}})}catch(e){return console.error("Error fetching prompt templates:",e),p.NextResponse.json({error:"Failed to fetch prompt templates"},{status:500})}}async function m(e){try{let{action:t,templateId:r,variables:s,template:a}=await e.json();if("generate"===t){if(!r||!s)return p.NextResponse.json({error:"Template ID and variables are required for generation"},{status:400});let e=l.generatePrompt(r,s);return p.NextResponse.json({success:e.success,prompt:e.prompt,variables:e.variables,metadata:e.metadata,errors:e.errors})}if("preview"===t){if(!r||!s)return p.NextResponse.json({error:"Template ID and variables are required for preview"},{status:400});let e=l.previewPrompt(r,s);return p.NextResponse.json({success:!0,preview:e,templateId:r,variables:s})}{if("create"!==t)return p.NextResponse.json({error:'Invalid action. Use "generate", "preview", or "create"'},{status:400});if(!a)return p.NextResponse.json({error:"Template data is required for creation"},{status:400});if(!a.id||!a.name||!a.template)return p.NextResponse.json({error:"Template must have id, name, and template fields"},{status:400});let e={...a,createdAt:new Date,updatedAt:new Date,metadata:{author:"User",tags:[],estimatedTokens:0,complexity:"medium",purpose:"",...a.metadata}};return l.registerTemplate(e),p.NextResponse.json({success:!0,message:"Template created successfully",templateId:a.id})}}catch(e){return console.error("Error processing prompt request:",e),p.NextResponse.json({error:"Failed to process prompt request"},{status:500})}}async function c(e){try{let{templateId:t,template:r}=await e.json();if(!t||!r)return p.NextResponse.json({error:"Template ID and template data are required"},{status:400});let s=l.getTemplate(t);if(!s)return p.NextResponse.json({error:"Template not found"},{status:404});let a={...s,...r,id:t,updatedAt:new Date};return l.registerTemplate(a),p.NextResponse.json({success:!0,message:"Template updated successfully",templateId:t})}catch(e){return console.error("Error updating prompt template:",e),p.NextResponse.json({error:"Failed to update prompt template"},{status:500})}}async function d(e){try{let{searchParams:t}=new URL(e.url),r=t.get("id");if(!r)return p.NextResponse.json({error:"Template ID is required"},{status:400});if(!l.getTemplate(r))return p.NextResponse.json({error:"Template not found"},{status:404});return p.NextResponse.json({success:!0,message:"Template deletion requested",note:"Templates are currently stored in memory and will be reset on restart"})}catch(e){return console.error("Error deleting prompt template:",e),p.NextResponse.json({error:"Failed to delete prompt template"},{status:500})}}let g=new a.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/prompts/route",pathname:"/api/prompts",filename:"route",bundlePath:"app/api/prompts/route"},resolvedPagePath:"/Users/philippebeliveau/Desktop/Notebook/gayed-signals-dashboard/apps/web/src/app/api/prompts/route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:f,workUnitAsyncStorage:x,serverHooks:h}=g;function y(){return(0,o.patchFetch)({workAsyncStorage:f,workUnitAsyncStorage:x})}},48106:(e,t,r)=>{"use strict";e.exports=r(44870)},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},80408:()=>{},87032:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[620],()=>r(47502));module.exports=s})();