(()=>{var e={};e.id=819,e.ids=[819],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},48106:(e,t,r)=>{"use strict";e.exports=r(44870)},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},72404:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>h,routeModule:()=>p,serverHooks:()=>y,workAsyncStorage:()=>d,workUnitAsyncStorage:()=>m});var s={};r.r(s),r.d(s,{GET:()=>c,POST:()=>u});var a=r(48106),i=r(48819),n=r(12050),o=r(4235);async function l(e){try{let t=await fetch("http://localhost:5000/analyze",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),signal:AbortSignal.timeout(15e3)});if(t.ok){let e=await t.json();return{chartUrl:e.chart_url,performanceMetrics:e.performance,correlationMatrix:e.correlations,signalTimeline:e.timeline,warnings:e.warnings||[],executionTime:e.executionTime||0}}throw Error(`Python service responded with status ${t.status}`)}catch(e){throw console.error("Python Backtrader service error:",e),Error("REAL DATA SERVICE REQUIRED: Python Backtrader service is not available. This system requires real market data analysis. Please start the Python service: cd python-services/backtrader-analysis && python start_service.py")}}async function u(e){try{let t=await e.json(),r=function(e){let t=[];return e.startDate||t.push("Start date is required"),e.endDate||t.push("End date is required"),e.startDate&&e.endDate&&new Date(e.startDate)>=new Date(e.endDate)&&t.push("End date must be after start date"),e.symbols&&Array.isArray(e.symbols)&&0!==e.symbols.length||t.push("At least one symbol must be selected"),e.signals&&Array.isArray(e.signals)&&0!==e.signals.length||t.push("At least one signal must be selected"),("number"!=typeof e.initialCash||e.initialCash<=0)&&t.push("Initial cash must be a positive number"),("number"!=typeof e.commission||e.commission<0)&&t.push("Commission must be a non-negative number"),{isValid:0===t.length,errors:t}}(t);if(!r.isValid)return o.NextResponse.json({error:`Configuration validation failed: ${r.errors.join(", ")}`},{status:400});console.log("[BACKTRADER API] Analysis request received:",{symbols:t.symbols,signals:t.signals,dateRange:`${t.startDate} to ${t.endDate}`,initialCash:t.initialCash});let s=await l(t);return console.log("[BACKTRADER API] Analysis completed successfully:",{executionTime:s.executionTime,totalReturn:s.performanceMetrics.totalReturn,correlations:s.correlationMatrix.length,warnings:s.warnings.length}),o.NextResponse.json(s)}catch(e){return console.error("[BACKTRADER API] Error:",e),o.NextResponse.json({error:e instanceof Error?e.message:"Internal server error",details:"Failed to process Backtrader analysis request"},{status:500})}}async function c(){return o.NextResponse.json({status:"active",service:"Backtrader Analysis API",version:"1.0.0",capabilities:{supportedSymbols:["SPY","XLU","WOOD","GLD","TLT","QQQ","IWM","VXX","DBA","USO"],supportedSignals:["utilities_spy","lumber_gold","treasury_curve","sp500_ma","vix_defensive"],supportedTimeframes:["1D","1W","1M"],supportedChartStyles:["candlestick","ohlc","line"],maxAnalysisPeriod:"10 years",maxSymbols:10,maxSignals:5},endpoints:{analyze:"POST /api/backtrader",status:"GET /api/backtrader"},documentation:"/docs/backtrader-api",lastUpdated:new Date().toISOString()})}let p=new a.AppRouteRouteModule({definition:{kind:i.RouteKind.APP_ROUTE,page:"/api/backtrader/route",pathname:"/api/backtrader",filename:"route",bundlePath:"app/api/backtrader/route"},resolvedPagePath:"/Users/philippebeliveau/Desktop/Notebook/gayed-signals-dashboard/apps/web/src/app/api/backtrader/route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:d,workUnitAsyncStorage:m,serverHooks:y}=p;function h(){return(0,n.patchFetch)({workAsyncStorage:d,workUnitAsyncStorage:m})}},80408:()=>{},87032:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[620],()=>r(72404));module.exports=s})();