"use strict";(()=>{var e={};e.id=232,e.ids=[232],e.modules={3295:e=>{e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},28354:e=>{e.exports=require("util")},29294:e=>{e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},44870:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},51043:(e,t,r)=>{r.r(t),r.d(t,{patchFetch:()=>w,routeModule:()=>h,serverHooks:()=>S,workAsyncStorage:()=>v,workUnitAsyncStorage:()=>x});var s={};r.r(s),r.d(s,{GET:()=>g,OPTIONS:()=>m});var o=r(48106),n=r(48819),a=r(12050),i=r(4235),u=r(49165),c=r(6299),l=r(87046),p=r(88010),d=r(95956);async function g(e){let t=Date.now(),r=`monitoring_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;try{console.log(`📊 [${r}] Fetching comprehensive monitoring data...`);let e=u.$n.getHealthStatus(),s=u.$n.getStats(),o=u.$n.getRecentAlerts(50),n=l._V.getSecurityStats(),a=c.kE.getProviderHealth(),g=c.kE.getCacheStats(),m=p.B.getCurrentDegradationLevel(),h=p.B.getServiceStatus(),v=d.y1.getStats(),x=!1;try{x=(await Promise.race([d.y1.healthCheck(),new Promise((e,t)=>setTimeout(()=>t(Error("Health check timeout")),5e3))])).details.yahoo_finance}catch(e){console.warn(`⚠️ [${r}] Yahoo Finance health check failed:`,e),x=!1}let S={...a,"yahoo-finance-live":x},w={health:{status:e.status,metrics:e.metrics,uptime:e.uptime,circuitBreakerState:e.circuitBreakerState},security:{rateLimiting:n?.rateLimiting||{totalIPs:0,suspiciousIPs:0,totalRequests:0},events:n?.events||{total:0,recent:[]},suspiciousIPs:n?.suspiciousIPs||[]},dataSources:S,alerts:o,cache:g,degradation:{currentLevel:m,serviceStatus:h},performance:{requestStats:{...s.requests,averageResponseTime:s.requests.responseTimes?.length>0?s.requests.responseTimes.reduce((e,t)=>e+t,0)/s.requests.responseTimes.length:0},clientStats:v},timestamp:new Date().toISOString(),requestId:r},y=Date.now()-t;return console.log(`✅ [${r}] Monitoring data collected successfully in ${y}ms`),i.NextResponse.json(w,{status:200,headers:{"Content-Type":"application/json","X-Request-ID":r,"X-Response-Time":y.toString(),"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"}})}catch(n){let e=Date.now()-t,s=n instanceof Error?n.message:"Unknown monitoring error";console.error(`❌ [${r}] Monitoring API error:`,n);let o={error:"Failed to fetch monitoring data",details:s,timestamp:new Date().toISOString(),requestId:r,responseTime:e,health:{status:"unhealthy",metrics:null,uptime:0,circuitBreakerState:"UNKNOWN"},alerts:[{id:`monitoring_error_${Date.now()}`,level:"ERROR",message:`Monitoring system error: ${s}`,timestamp:new Date,metadata:{error:s,requestId:r}}]};return i.NextResponse.json(o,{status:500,headers:{"Content-Type":"application/json","X-Request-ID":r,"X-Error":"true"}})}}async function m(e){return i.NextResponse.json({},{status:200,headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, OPTIONS","Access-Control-Allow-Headers":"Content-Type, Authorization","Access-Control-Max-Age":"86400"}})}let h=new o.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/monitoring/route",pathname:"/api/monitoring",filename:"route",bundlePath:"app/api/monitoring/route"},resolvedPagePath:"/Users/philippebeliveau/Desktop/Notebook/gayed-signals-dashboard/apps/web/src/app/api/monitoring/route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:v,workUnitAsyncStorage:x,serverHooks:S}=h;function w(){return(0,a.patchFetch)({workAsyncStorage:v,workUnitAsyncStorage:x})}},63033:e=>{e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},79551:e=>{e.exports=require("url")},94735:e=>{e.exports=require("events")}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[620,149],()=>r(51043));module.exports=s})();