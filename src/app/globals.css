@import "tailwindcss";

/* Light Theme Variables */
:root.light {
  /* Background Colors - Updated to match reference design */
  --theme-bg: #FFFFFF;
  --theme-bg-secondary: #FFFFFF;
  --theme-bg-tertiary: #F8FAFC;

  /* Sidebar Colors - Dark theme for left navigation */
  --theme-sidebar-bg: #2D3748;
  --theme-sidebar-text: #E2E8F0;
  --theme-sidebar-text-muted: #A0AEC0;
  --theme-sidebar-active: #3182CE;
  
  /* Card Colors - Pure white with professional shadows */
  --theme-card: #FFFFFF;
  --theme-card-hover: #FFFFFF;
  --theme-card-secondary: #FFFFFF;
  --theme-card-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
  --theme-card-shadow-hover: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
  
  /* Border Colors */
  --theme-border: #e2e8f0;
  --theme-border-hover: #cbd5e1;
  --theme-border-focus: #3b82f6;
  
  /* Text Colors - Updated for better contrast */
  --theme-text: #1A202C;
  --theme-text-secondary: #4A5568;
  --theme-text-muted: #718096;
  --theme-text-light: #A0AEC0;
  
  /* Primary Professional Colors - Updated to match reference blue */
  --theme-primary: #3182CE;
  --theme-primary-hover: #2B6CB0;
  --theme-primary-light: #4299E1;
  --theme-primary-bg: #EBF8FF;
  --theme-primary-border: #90CDF4;
  
  /* Accent Colors */
  --theme-accent: #3b82f6;
  --theme-accent-hover: #2563eb;
  
  /* Status Colors */
  --theme-success: #059669;
  --theme-success-bg: #ECFDF5;
  --theme-success-border: #A7F3D0;
  
  --theme-danger: #DC2626;
  --theme-danger-bg: #FEF2F2;
  --theme-danger-border: #FECACA;
  
  --theme-warning: #D97706;
  --theme-warning-bg: #FFFBEB;
  --theme-warning-border: #FED7AA;
  
  --theme-info: #2563EB;
  --theme-info-bg: #EFF6FF;
  --theme-info-border: #BFDBFE;
  
  /* Trading Specific Colors */
  --theme-risk-on: #059669;
  --theme-risk-on-bg: #ECFDF5;
  --theme-risk-off: #DC2626;
  --theme-risk-off-bg: #FEF2F2;
  --theme-neutral: #D97706;
  --theme-neutral-bg: #FFFBEB;
  
  /* Shadow Colors */
  --theme-shadow: rgba(15, 23, 42, 0.08);
  --theme-shadow-hover: rgba(15, 23, 42, 0.12);
  
  /* Trading Pattern Colors */
  --theme-pattern-primary: rgba(59, 130, 246, 0.03);
  --theme-pattern-secondary: rgba(59, 130, 246, 0.06);
  --theme-grid: rgba(59, 130, 246, 0.08);
}

/* Dark Theme Variables */
:root.dark {
  /* Background Colors */
  --theme-bg: #1a1a1a;
  --theme-bg-secondary: #2a2a2a;
  --theme-bg-tertiary: #2f2f2f;
  
  /* Card Colors */
  --theme-card: #2a2a2a;
  --theme-card-hover: #323232;
  --theme-card-secondary: #2f2f2f;
  
  /* Border Colors */
  --theme-border: #3a3a3a;
  --theme-border-hover: #4a4a4a;
  --theme-border-focus: #3b82f6;
  
  /* Text Colors */
  --theme-text: #e5e5e5;
  --theme-text-secondary: #c5c5c5;
  --theme-text-muted: #a5a5a5;
  --theme-text-light: #8a8a8a;
  
  /* Primary Professional Colors - Updated to match reference blue */
  --theme-primary: #3182CE;
  --theme-primary-hover: #2B6CB0;
  --theme-primary-light: #4299E1;
  --theme-primary-bg: #EBF8FF;
  --theme-primary-border: #90CDF4;
  
  /* Accent Colors */
  --theme-accent: #3b82f6;
  --theme-accent-hover: #2563eb;
  
  /* Status Colors */
  --theme-success: #059669;
  --theme-success-bg: #ecfdf5;
  --theme-success-border: #a7f3d0;
  
  --theme-danger: #dc2626;
  --theme-danger-bg: #fef2f2;
  --theme-danger-border: #fecaca;
  
  --theme-warning: #d97706;
  --theme-warning-bg: #fffbeb;
  --theme-warning-border: #fed7aa;
  
  --theme-info: #2563eb;
  --theme-info-bg: #eff6ff;
  --theme-info-border: #bfdbfe;
  
  /* Trading Specific Colors */
  --theme-risk-on: #059669;
  --theme-risk-on-bg: #ecfdf5;
  --theme-risk-off: #dc2626;
  --theme-risk-off-bg: #fef2f2;
  --theme-neutral: #d97706;
  --theme-neutral-bg: #fffbeb;
  
  /* Shadow Colors */
  --theme-shadow: rgba(15, 23, 42, 0.08);
  --theme-shadow-hover: rgba(15, 23, 42, 0.12);
  
  /* Trading Pattern Colors */
  --theme-pattern-primary: rgba(59, 130, 246, 0.03);
  --theme-pattern-secondary: rgba(59, 130, 246, 0.06);
  --theme-grid: rgba(59, 130, 246, 0.08);
}

/* Default to light theme matching reference design */
:root {
  --theme-bg: #FFFFFF;
  --theme-bg-secondary: #FFFFFF;
  --theme-bg-tertiary: #F8FAFC;
  --theme-card: #FFFFFF;
  --theme-card-hover: #FFFFFF;
  --theme-card-secondary: #FFFFFF;
  --theme-card-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
  --theme-card-shadow-hover: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
  --theme-sidebar-bg: #2D3748;
  --theme-sidebar-text: #E2E8F0;
  --theme-sidebar-text-muted: #A0AEC0;
  --theme-sidebar-active: #3182CE;
  --theme-border: #e2e8f0;
  --theme-border-hover: #cbd5e1;
  --theme-border-focus: #3b82f6;
  --theme-text: #1A202C;
  --theme-text-secondary: #4A5568;
  --theme-text-muted: #718096;
  --theme-text-light: #A0AEC0;
  --theme-primary: #3182CE;
  --theme-primary-hover: #2B6CB0;
  --theme-primary-light: #4299E1;
  --theme-primary-bg: #eff6ff;
  --theme-primary-border: #93c5fd;
  --theme-accent: #3b82f6;
  --theme-accent-hover: #2563eb;
  --theme-success: #059669;
  --theme-success-bg: #ecfdf5;
  --theme-success-border: #a7f3d0;
  --theme-danger: #dc2626;
  --theme-danger-bg: #fef2f2;
  --theme-danger-border: #fecaca;
  --theme-warning: #d97706;
  --theme-warning-bg: #fffbeb;
  --theme-warning-border: #fed7aa;
  --theme-info: #2563eb;
  --theme-info-bg: #eff6ff;
  --theme-info-border: #bfdbfe;
  --theme-risk-on: #059669;
  --theme-risk-on-bg: #ecfdf5;
  --theme-risk-off: #dc2626;
  --theme-risk-off-bg: #fef2f2;
  --theme-neutral: #d97706;
  --theme-neutral-bg: #fffbeb;
  --theme-shadow: rgba(15, 23, 42, 0.08);
  --theme-shadow-hover: rgba(15, 23, 42, 0.12);
  --theme-pattern-primary: rgba(59, 130, 246, 0.03);
  --theme-pattern-secondary: rgba(59, 130, 246, 0.06);
  --theme-grid: rgba(59, 130, 246, 0.08);
}

@theme inline {
  --color-theme-bg: var(--theme-bg);
  --color-theme-bg-secondary: var(--theme-bg-secondary);
  --color-theme-bg-tertiary: var(--theme-bg-tertiary);
  --color-theme-card: var(--theme-card);
  --color-theme-card-hover: var(--theme-card-hover);
  --color-theme-card-secondary: var(--theme-card-secondary);
  --color-theme-border: var(--theme-border);
  --color-theme-border-hover: var(--theme-border-hover);
  --color-theme-border-focus: var(--theme-border-focus);
  --color-theme-text: var(--theme-text);
  --color-theme-text-secondary: var(--theme-text-secondary);
  --color-theme-text-muted: var(--theme-text-muted);
  --color-theme-text-light: var(--theme-text-light);
  --color-theme-primary: var(--theme-primary);
  --color-theme-primary-hover: var(--theme-primary-hover);
  --color-theme-primary-light: var(--theme-primary-light);
  --color-theme-primary-bg: var(--theme-primary-bg);
  --color-theme-primary-border: var(--theme-primary-border);
  --color-theme-accent: var(--theme-accent);
  --color-theme-accent-hover: var(--theme-accent-hover);
  --color-theme-success: var(--theme-success);
  --color-theme-success-bg: var(--theme-success-bg);
  --color-theme-success-border: var(--theme-success-border);
  --color-theme-danger: var(--theme-danger);
  --color-theme-danger-bg: var(--theme-danger-bg);
  --color-theme-danger-border: var(--theme-danger-border);
  --color-theme-warning: var(--theme-warning);
  --color-theme-warning-bg: var(--theme-warning-bg);
  --color-theme-warning-border: var(--theme-warning-border);
  --color-theme-info: var(--theme-info);
  --color-theme-info-bg: var(--theme-info-bg);
  --color-theme-info-border: var(--theme-info-border);
  --color-theme-risk-on: var(--theme-risk-on);
  --color-theme-risk-on-bg: var(--theme-risk-on-bg);
  --color-theme-risk-off: var(--theme-risk-off);
  --color-theme-risk-off-bg: var(--theme-risk-off-bg);
  --color-theme-neutral: var(--theme-neutral);
  --color-theme-neutral-bg: var(--theme-neutral-bg);
  --color-theme-shadow: var(--theme-shadow);
  --color-theme-shadow-hover: var(--theme-shadow-hover);
  --color-theme-pattern-primary: var(--theme-pattern-primary);
  --color-theme-pattern-secondary: var(--theme-pattern-secondary);
  --color-theme-grid: var(--theme-grid);
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);
}

/* Trading Background Patterns */
.trading-background {
  position: relative;
  overflow: hidden;
}

.trading-background::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-image: 
    /* Subtle grid pattern */
    linear-gradient(var(--theme-grid) 1px, transparent 1px),
    linear-gradient(90deg, var(--theme-grid) 1px, transparent 1px),
    /* Trading chart pattern */
    radial-gradient(circle at 25% 25%, var(--theme-pattern-primary) 0%, transparent 50%),
    radial-gradient(circle at 75% 75%, var(--theme-pattern-secondary) 0%, transparent 50%);
  background-size: 50px 50px, 50px 50px, 200px 200px, 200px 200px;
  background-position: 0 0, 0 0, 0 0, 0 0;
  pointer-events: none;
  z-index: 0;
}

.trading-background-subtle {
  position: relative;
  overflow: hidden;
}

.trading-background-subtle::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-image: 
    /* Very subtle grid */
    linear-gradient(rgba(124, 58, 237, 0.02) 1px, transparent 1px),
    linear-gradient(90deg, rgba(124, 58, 237, 0.02) 1px, transparent 1px);
  background-size: 100px 100px;
  pointer-events: none;
  z-index: 0;
}

/* Financial symbol watermarks for light theme */
:root.light .trading-symbols::after {
  content: '₿ $ € £ ¥ ∑ ∆ π ∫ ∞ ≈ ± × ÷ % ‰ ∞';
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%) rotate(-5deg);
  font-size: 12px;
  color: rgba(124, 58, 237, 0.03);
  white-space: nowrap;
  letter-spacing: 20px;
  pointer-events: none;
  z-index: 0;
}

/* Smooth theme transitions */
* {
  transition: background-color 0.3s ease, border-color 0.3s ease, color 0.3s ease, box-shadow 0.3s ease;
}

body {
  background: var(--theme-bg);
  color: var(--theme-text);
  font-family: var(--font-geist-sans), system-ui, -apple-system, sans-serif;
  transition: background-color 0.3s ease, color 0.3s ease;
}

/* Scrollbar styling */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: var(--theme-bg-secondary);
}

::-webkit-scrollbar-thumb {
  background: var(--theme-border-hover);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--theme-text-muted);
}

/* Focus styles */
*:focus {
  outline: none;
}

*:focus-visible {
  outline: 2px solid var(--theme-accent);
  outline-offset: 2px;
}

/* Chart Container Styles */
.chart-container {
  position: relative;
  z-index: 10;
  min-height: 300px;
  width: 100%;
}

.chart-responsive-wrapper {
  position: relative;
  z-index: 10;
  height: 100%;
  width: 100%;
}

/* Chart-specific element exclusions from global transitions */
.chart-container *,
.recharts-wrapper *,
.recharts-surface * {
  transition: none !important;
}

/* Chart Loading States */
.chart-loading {
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 300px;
  background: var(--theme-card);
  border: 1px solid var(--theme-border);
  border-radius: 0.75rem;
}

.chart-error {
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 300px;
  background: var(--theme-danger-bg);
  border: 1px solid var(--theme-danger-border);
  border-radius: 0.75rem;
  color: var(--theme-danger);
}

/* Enhanced Chart Theme Integration */
.chart-container {
  position: relative;
  z-index: 10;
  width: 100%;
  background: var(--theme-card);
  border-radius: 0.75rem;
}

.chart-container .recharts-wrapper {
  width: 100% !important;
  height: 100% !important;
}

.chart-container .recharts-surface {
  overflow: visible;
}

/* Force theme colors in Recharts SVG elements */
.chart-container .recharts-cartesian-grid line {
  stroke: var(--theme-border) !important;
  opacity: 0.3;
}

.chart-container .recharts-cartesian-grid-horizontal line,
.chart-container .recharts-cartesian-grid-vertical line {
  stroke: var(--theme-grid) !important;
  opacity: 0.5;
}

.chart-container .recharts-xAxis .recharts-cartesian-axis-tick-value,
.chart-container .recharts-yAxis .recharts-cartesian-axis-tick-value {
  fill: var(--theme-text-muted) !important;
  font-size: 12px;
}

.chart-container .recharts-xAxis .recharts-cartesian-axis-line,
.chart-container .recharts-yAxis .recharts-cartesian-axis-line {
  stroke: var(--theme-border) !important;
}

.chart-container .recharts-tooltip-wrapper {
  z-index: 1000 !important;
}

.chart-container .recharts-tooltip-cursor {
  stroke: var(--theme-primary) !important;
  opacity: 0.3;
}

.chart-container .recharts-reference-line line {
  stroke: var(--theme-text-light) !important;
  stroke-dasharray: 5,5;
  opacity: 0.7;
}

.chart-container .recharts-reference-dot circle {
  stroke: var(--theme-card) !important;
  stroke-width: 2;
}

/* Legacy support for existing classes */
.chart-grid-color { stroke: var(--theme-border) !important; }
.chart-axis-color { stroke: var(--theme-text-muted) !important; }
.chart-text-color { fill: var(--theme-text-muted) !important; }

/* CHART VISIBILITY FIXES - Ensure charts are not hidden */
.chart-container {
  overflow: visible !important;
  height: auto !important;
  min-height: 800px !important;
}

.chart-responsive-wrapper {
  overflow: visible !important;
  height: auto !important;
  min-height: 800px !important;
}

/* Ensure ResponsiveContainer doesn't get hidden */
.recharts-responsive-container {
  overflow: visible !important;
  height: auto !important;
  min-height: 700px !important;
}

/* Fix any containers that might clip charts */
.bg-white.border.rounded-xl {
  overflow: visible !important;
}

/* Remove any clipping from page containers */
.max-w-7xl {
  overflow: visible !important;
}

main {
  overflow: visible !important;
}

/* Fix any potential layout issues with chart pages */
.chart-page-container {
  min-height: 100vh;
  overflow-y: auto;
}

/* Ensure main containers don't restrict chart height */
main {
  overflow: visible !important;
}

/* Responsive chart containers */
@media (max-width: 768px) {
  .chart-container {
    min-height: 500px !important;
  }
  
  .chart-responsive-wrapper {
    min-height: 500px !important;
  }
  
  .recharts-responsive-container {
    height: 400px !important;
    min-height: 400px !important;
  }
}

@media (max-width: 640px) {
  .chart-container {
    min-height: 400px !important;
  }
  
  .chart-responsive-wrapper {
    min-height: 400px !important;
  }
  
  .recharts-responsive-container {
    height: 350px !important;
    min-height: 350px !important;
  }
}

/* =================================================================
 * UNIFIED NAVIGATION STYLES
 * =================================================================*/

/* Professional navigation backdrop blur */
.nav-backdrop {
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  background: rgba(255, 255, 255, 0.95);
}

:root.dark .nav-backdrop {
  background: rgba(26, 26, 26, 0.95);
}

/* Navigation item hover effects */
.nav-item {
  position: relative;
  overflow: hidden;
}

.nav-item::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
  transition: left 0.5s ease;
}

.nav-item:hover::before {
  left: 100%;
}

/* =================================================================
 * MOBILE OPTIMIZATION STYLES
 * =================================================================*/

/* Touch-optimized interactions */
.touch-manipulation {
  touch-action: manipulation;
  -webkit-tap-highlight-color: transparent;
  /* Improve touch response */
  cursor: pointer;
  user-select: none;
  -webkit-user-select: none;
}

/* Enhanced touch targets */
.touch-target {
  min-height: 44px;
  min-width: 44px;
  position: relative;
}

/* Touch feedback animations */
.touch-feedback {
  position: relative;
  overflow: hidden;
}

.touch-feedback::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: radial-gradient(circle, rgba(255,255,255,0.3) 0%, transparent 70%);
  transform: scale(0);
  transition: transform 0.2s ease-out;
  pointer-events: none;
}

.touch-feedback:active::before {
  transform: scale(1);
}

/* Swipe gesture support */
.swipeable {
  touch-action: pan-x;
  -webkit-overflow-scrolling: touch;
}

/* Pull-to-refresh indicator */
.ptr-indicator {
  position: absolute;
  top: -60px;
  left: 50%;
  transform: translateX(-50%);
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--theme-primary);
  border-radius: 50%;
  transition: all 0.3s ease;
  opacity: 0;
}

.ptr-active .ptr-indicator {
  opacity: 1;
  top: 20px;
}

/* Hide scrollbars on mobile while maintaining functionality */
.scrollbar-hide {
  -ms-overflow-style: none;
  scrollbar-width: none;
}

.scrollbar-hide::-webkit-scrollbar {
  display: none;
}

/* Safe area adjustments for mobile devices */
@supports (padding: max(0px)) {
  .safe-top {
    padding-top: max(1rem, env(safe-area-inset-top));
  }
  
  .safe-bottom {
    padding-bottom: max(1rem, env(safe-area-inset-bottom));
  }
  
  .safe-left {
    padding-left: max(1rem, env(safe-area-inset-left));
  }
  
  .safe-right {
    padding-right: max(1rem, env(safe-area-inset-right));
  }
}

/* Mobile-first responsive text scaling with improved performance */
@media (max-width: 640px) {
  html {
    font-size: 14px;
    /* Improve mobile viewport handling */
    -webkit-text-size-adjust: 100%;
    -ms-text-size-adjust: 100%;
    text-size-adjust: 100%;
  }

  /* Mobile-specific optimizations */
  body {
    /* Prevent bounce scrolling on iOS */
    position: fixed;
    overflow: hidden;
    width: 100%;
    height: 100%;
  }

  #__next {
    height: 100%;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
  }
}

@media (min-width: 641px) {
  html {
    font-size: 16px;
  }

  /* Reset mobile-specific styles on desktop */
  body {
    position: static;
    overflow: visible;
    width: auto;
    height: auto;
  }
}

/* Enhanced touch targets for mobile */
@media (max-width: 768px) {
  button, 
  [role="button"], 
  input[type="button"], 
  input[type="submit"], 
  .cursor-pointer {
    min-height: 44px;
    min-width: 44px;
  }
  
  /* Better spacing for mobile inputs */
  input, 
  textarea, 
  select {
    padding: 12px 16px;
    font-size: 16px; /* Prevents zoom on iOS */
  }
}

/* Mobile navigation optimizations */
@media (max-width: 768px) {
  .mobile-nav-item {
    padding: 12px 16px;
    margin: 4px 0;
    border-radius: 8px;
    transition: all 0.2s ease;
  }
  
  .mobile-nav-item:active {
    transform: scale(0.98);
    background-color: var(--theme-card-hover);
  }
}

/* Mobile modal optimizations */
@media (max-width: 640px) {
  .mobile-modal {
    margin: 0;
    border-radius: 16px 16px 0 0;
    max-height: 90vh;
    min-height: 50vh;
  }
  
  .mobile-modal-header {
    padding: 16px;
    border-bottom: 1px solid var(--theme-border);
    border-radius: 16px 16px 0 0;
  }
  
  .mobile-modal-content {
    padding: 16px;
    overflow-y: auto;
    max-height: calc(90vh - 80px);
  }
}

/* Card hover effects for mobile */
@media (hover: none) and (pointer: coarse) {
  .hover\:scale-\[1\.02\]:hover {
    transform: none;
  }
  
  .hover\:scale-\[1\.02\]:active {
    transform: scale(0.98);
  }
}

/* Mobile-friendly grid adjustments */
@media (max-width: 640px) {
  .mobile-grid-single {
    grid-template-columns: 1fr;
  }
  
  .mobile-grid-double {
    grid-template-columns: 1fr 1fr;
  }
}

/* Improve text readability on mobile */
@media (max-width: 768px) {
  .text-mobile-base {
    font-size: 0.875rem;
    line-height: 1.5;
  }
  
  .text-mobile-lg {
    font-size: 1.125rem;
    line-height: 1.4;
  }
  
  .text-mobile-xl {
    font-size: 1.5rem;
    line-height: 1.3;
  }
}

/* Loading states optimized for mobile */
@media (max-width: 640px) {
  .mobile-loading {
    padding: 2rem 1rem;
  }
  
  .mobile-loading .animate-spin {
    width: 2rem;
    height: 2rem;
  }
}

/* Better mobile spacing */
.mobile-space-y-2 > * + * {
  margin-top: 0.5rem;
}

.mobile-space-y-3 > * + * {
  margin-top: 0.75rem;
}

.mobile-space-y-4 > * + * {
  margin-top: 1rem;
}

/* Mobile performance optimizations */
@media (max-width: 768px) {
  * {
    -webkit-backface-visibility: hidden;
    backface-visibility: hidden;
    -webkit-perspective: 1000;
    perspective: 1000;
  }
  
  .transition-transform {
    will-change: transform;
  }
  
  .transition-colors {
    will-change: background-color, color;
  }
}

/* =================================================================
 * CLERK MOBILE OPTIMIZATION (Simplified)
 * =================================================================*/

/* Essential mobile optimizations for Clerk forms */
@media (max-width: 768px) {
  /* Clerk form inputs mobile optimization */
  .cl-formFieldInput {
    min-height: 48px !important;
    font-size: 16px !important; /* Prevents zoom on iOS */
    padding: 12px 16px !important;
    border-radius: 8px !important;
  }
  
  /* Clerk buttons mobile optimization */
  .cl-formButtonPrimary {
    min-height: 48px !important;
    font-size: 16px !important;
    border-radius: 8px !important;
    padding: 14px 20px !important;
    touch-action: manipulation !important;
  }
  
  /* Clerk social buttons mobile optimization */
  .cl-socialButtonsBlockButton {
    min-height: 48px !important;
    border-radius: 8px !important;
    touch-action: manipulation !important;
  }
}


/* =================================================================
 * MOBILE BROWSER COMPATIBILITY FIXES
 * =================================================================*/

/* Chrome Mobile Address Bar Hiding Support */
@media (max-width: 768px) {
  /* Fix for Chrome mobile address bar */
  html {
    height: -webkit-fill-available;
    height: fill-available;
    font-size: 14px; /* Smaller base font for mobile */
  }

  body {
    min-height: 100vh;
    min-height: -webkit-fill-available;
    min-height: fill-available;
    /* Prevent horizontal scrolling on mobile */
    overflow-x: hidden;
    /* Ensure proper touch scrolling */
    -webkit-overflow-scrolling: touch;
    /* Improve rendering performance */
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
  }

  /* Fix button click delays on iOS */
  button,
  input[type="submit"],
  input[type="button"],
  [role="button"] {
    -webkit-tap-highlight-color: transparent;
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    user-select: none;
    /* Improve button performance */
    will-change: transform;
    transform: translateZ(0);
  }

  /* Prevent zoom on input focus (iOS) */
  input,
  textarea,
  select {
    font-size: 16px !important;
    -webkit-appearance: none;
    appearance: none;
    /* Improve input performance */
    will-change: auto;
  }

  /* Fix sticky positioning on mobile */
  .sticky {
    position: -webkit-sticky !important;
    position: sticky !important;
  }

  /* Performance optimizations for mobile */
  * {
    /* Reduce paint and composite layers */
    -webkit-backface-visibility: hidden;
    backface-visibility: hidden;
    /* Enable hardware acceleration for transforms */
    transform: translateZ(0);
  }

  /* Optimize scroll performance */
  .overflow-y-auto,
  .overflow-auto {
    -webkit-overflow-scrolling: touch;
    scroll-behavior: smooth;
  }

  /* Optimize image rendering on mobile */
  img {
    image-rendering: -webkit-optimize-contrast;
    image-rendering: crisp-edges;
  }
}

/* Samsung Internet Browser Fixes */
@media (max-width: 768px) {
  /* Fix Samsung Internet modal issues */
  .cl-modalContainer {
    -webkit-transform: translate3d(0, 0, 0);
    transform: translate3d(0, 0, 0);
  }
}

/* Firefox Mobile Fixes */
@-moz-document url-prefix() {
  @media (max-width: 768px) {
    .cl-modalContent {
      -moz-overflow-scrolling: auto !important;
    }
  }
}

/* High DPI Mobile Device Optimizations */
@media (max-width: 768px) and (min-resolution: 2dppx) {
  /* Optimize for high-DPI mobile screens */
  * {
    image-rendering: -webkit-optimize-contrast;
    image-rendering: crisp-edges;
  }
  
  /* Ensure sharp rendering on retina displays */
  .cl-card,
  .bg-theme-card {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
}

/* =================================================================
 * CUSTOM THEME UTILITY CLASSES - CRITICAL FIX
 * =================================================================*/

/* Background utilities */
.bg-theme-bg { background-color: var(--theme-bg) !important; }
.bg-theme-bg-secondary { background-color: var(--theme-bg-secondary) !important; }
.bg-theme-card { background-color: var(--theme-card) !important; }
.bg-theme-card-hover { background-color: var(--theme-card-hover) !important; }
.bg-theme-card-secondary { background-color: var(--theme-card-secondary) !important; }

/* Text color utilities */
.text-theme-text { color: var(--theme-text) !important; }
.text-theme-text-secondary { color: var(--theme-text-secondary) !important; }
.text-theme-text-muted { color: var(--theme-text-muted) !important; }
.text-theme-text-light { color: var(--theme-text-light) !important; }

/* Primary color utilities */
.text-theme-primary { color: var(--theme-primary) !important; }
.bg-theme-primary { background-color: var(--theme-primary) !important; }
.bg-theme-primary-hover { background-color: var(--theme-primary-hover) !important; }
.bg-theme-primary-bg { background-color: var(--theme-primary-bg) !important; }

/* Border utilities */
.border-theme-border { border-color: var(--theme-border) !important; }
.border-theme-border-hover { border-color: var(--theme-border-hover) !important; }

/* Status color utilities */
.text-theme-success { color: var(--theme-success) !important; }
.text-theme-danger { color: var(--theme-danger) !important; }
.text-theme-warning { color: var(--theme-warning) !important; }
.text-theme-info { color: var(--theme-info) !important; }

.bg-theme-success-bg { background-color: var(--theme-success-bg) !important; }
.bg-theme-danger-bg { background-color: var(--theme-danger-bg) !important; }
.bg-theme-warning-bg { background-color: var(--theme-warning-bg) !important; }
.bg-theme-info-bg { background-color: var(--theme-info-bg) !important; }

.border-theme-success-border { border-color: var(--theme-success-border) !important; }
.border-theme-danger-border { border-color: var(--theme-danger-border) !important; }
.border-theme-warning-border { border-color: var(--theme-warning-border) !important; }
.border-theme-info-border { border-color: var(--theme-info-border) !important; }

/* Trading specific utilities */
.text-theme-risk-on { color: var(--theme-risk-on) !important; }
.text-theme-risk-off { color: var(--theme-risk-off) !important; }
.text-theme-neutral { color: var(--theme-neutral) !important; }

.bg-theme-risk-on-bg { background-color: var(--theme-risk-on-bg) !important; }
.bg-theme-risk-off-bg { background-color: var(--theme-risk-off-bg) !important; }
.bg-theme-neutral-bg { background-color: var(--theme-neutral-bg) !important; }

/* Professional Layout Utilities */
.bg-theme-sidebar { background-color: var(--theme-sidebar-bg) !important; }
.text-theme-sidebar { color: var(--theme-sidebar-text) !important; }
.text-theme-sidebar-muted { color: var(--theme-sidebar-text-muted) !important; }
.bg-theme-sidebar-active { background-color: var(--theme-sidebar-active) !important; }

/* Professional Card Shadows */
.shadow-theme-card { box-shadow: var(--theme-card-shadow) !important; }
.shadow-theme-card-hover { box-shadow: var(--theme-card-shadow-hover) !important; }

/* Professional Border Radius */
.rounded-theme { border-radius: 12px !important; }
.rounded-theme-sm { border-radius: 8px !important; }

/* Landscape Mobile Optimizations */
@media (max-width: 768px) and (orientation: landscape) {
  /* Adjust Clerk modal for landscape mobile */
  .cl-modalContent {
    max-height: 85vh !important;
    max-height: 85dvh !important;
  }
  
  /* Reduce header height in landscape */
  header {
    min-height: auto !important;
  }
}

/* Dark Mode Mobile Optimizations */
@media (max-width: 768px) and (prefers-color-scheme: dark) {
  /* Ensure proper contrast in dark mode on mobile */
  .cl-modalContent {
    color-scheme: dark;
  }
  
  /* Fix dark mode input styling on mobile */
  .cl-formFieldInput {
    color-scheme: dark !important;
  }
}
